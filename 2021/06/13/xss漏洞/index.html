<!DOCTYPE html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content="xss漏洞"><meta name="author" content="keikei"><meta name="keywords" content=""><meta name="copyright" content="copyright.liscense_type"><title>Xss漏洞</title><!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]><script src="https://cdn.bootcss.com/html5shiv/3.7.3/html5shiv.min.js"></script><script src="https://cdn.bootcss.com/respond/1.4.2/respond.min.js"></script><![endif]--><link rel="icon" href="/compass/imgs/favicon.ico"><link rel="stylesheet" href="/compass/stylesheets/font-awesome.min.css"><script>var algoliaConfig = {"on":false}</script><link rel="stylesheet" href="/compass/stylesheets/screen.css"><meta name="generator" content="Hexo 5.4.0"></head><body><div id="body-inner-wrapper"><header id="page-header"><nav id="nav"><div id="site-name">My blog</div><i class="fa fa-bars fa-2x" id="nav-icon" aria-hidden="true"></i><div id="nav-expanded"><a class="nav-word-item" href="/">Home</a><a class="nav-word-item" href="/archives">Archives</a><a class="nav-word-item" href="/tags">Tags</a><a class="nav-word-item" href="/categories">Catogories</a></div><div id="nav-list"><ul><li><a class="nav-list-item" href="/">Home</a></li><li><a class="nav-list-item" href="/archives">Archives</a></li><li><a class="nav-list-item" href="/tags">Tags</a></li><li><a class="nav-list-item" href="/categories">Catogories</a></li></ul></div></nav><div id="banner-wrapper"><div id="banner-pagetype-dependent-info"><h1 id="post-title">Xss漏洞</h1><span id="post-description"><i class="fa fa-calendar" aria-hidden="true"></i> 2021-06-13</span><span id="word-count">The total word count - 917</span><span id="time-count">Estimated time of reading - 4 mins</span></div></div><a title="Back to Top"><i class="fa fa-arrow-up" id="to-Top" aria-hidden="true"></i></a><a title="Click to Toggle off"><i class="fa fa-toggle-on" id="toggle-on-Toc" aria-hidden="true"></i></a><a title="Click to Toggle on"><i class="fa fa-toggle-off" id="toggle-off-Toc" aria-hidden="true"></i></a></header><aside id="toc-column"><div id="toc-column-inner-wrapper"><div id="post-toc"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#XSS%E6%BC%8F%E6%B4%9E"><span class="toc-text">XSS漏洞</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%BC%8F%E6%B4%9E%E5%8E%9F%E7%90%86%EF%BC%9A"><span class="toc-text">1.漏洞原理：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%BC%8F%E6%B4%9E%E7%B1%BB%E5%9E%8B%EF%BC%9A"><span class="toc-text">2.漏洞类型：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%94%BB%E5%87%BB%E6%96%B9%E5%BC%8F%EF%BC%9A"><span class="toc-text">3.攻击方式：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-xss%E6%BC%8F%E6%B4%9E%E8%83%BD%E5%81%9A%E4%BB%80%E4%B9%88"><span class="toc-text">4.xss漏洞能做什么</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-xss%E6%BC%8F%E6%B4%9E%E7%BB%95%E8%BF%87%E8%BF%87%E6%BB%A4%E6%96%B9%E6%B3%95"><span class="toc-text">5.xss漏洞绕过过滤方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%A4%A7%E5%B0%8F%E5%86%99%E7%BB%95%E8%BF%87"><span class="toc-text">1.大小写绕过</span></a></li></ol></li></ol></li></ol></li></ol></div></div></aside><main id="main-content-column"><div id="main-content-wrapper"><div id="post-full-content"><h1 id="XSS漏洞"><a href="#XSS漏洞" class="headerlink" title="XSS漏洞"></a>XSS漏洞</h1><h3 id="1-漏洞原理："><a href="#1-漏洞原理：" class="headerlink" title="1.漏洞原理："></a>1.漏洞原理：</h3><p>恶意攻击者往Web页面里插入恶意Script代码，当用户浏览该页之时，嵌入其中Web里面的Script代码会被执行，从而达到恶意攻击用户的目的。</p>
<h3 id="2-漏洞类型："><a href="#2-漏洞类型：" class="headerlink" title="2.漏洞类型："></a>2.漏洞类型：</h3><p>1.反射型xss<br>2.存储型xss<br>3.dom型xss<br>4.self-xss</p>
<h3 id="3-攻击方式："><a href="#3-攻击方式：" class="headerlink" title="3.攻击方式："></a>3.攻击方式：</h3><p>XSS的攻击方式就是想办法“<strong>教唆</strong>”用户的浏览器去执行一些这个网页中原本不存在的前端代码。</p>
<h3 id="4-xss漏洞能做什么"><a href="#4-xss漏洞能做什么" class="headerlink" title="4.xss漏洞能做什么"></a>4.xss漏洞能做什么</h3><p><img src="/.com//xss%E5%8D%B1%E5%AE%B3.png"></p>
<p><strong>1.盗取cookie</strong>：盗取cookie可以无密码登录，拿到管理员cookie还可以直接进后台</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">js代码：</span><br><span class="line">&lt;script&gt;</span><br><span class="line">	alert(<span class="built_in">document</span>.cookie);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p><strong>绕过</strong>：cookie有其他验证措施如：Http-Only保证同一cookie不能被滥用</p>
<p><strong>2.劫持流量实现恶意跳转</strong></p>
<p>在网页中插入这样一句话,访问网页，就直接跳到百度</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;<span class="built_in">window</span>.location.href=<span class="string">&quot;http://www.baidu.com&quot;</span>;&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p><strong>蠕虫病毒：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">例如看到一篇帖子，就会转发那个帖子，一传二，二传三</span><br></pre></td></tr></table></figure>

<h3 id="5-xss漏洞绕过过滤方法"><a href="#5-xss漏洞绕过过滤方法" class="headerlink" title="5.xss漏洞绕过过滤方法"></a>5.xss漏洞绕过过滤方法</h3><h4 id="1-大小写绕过"><a href="#1-大小写绕过" class="headerlink" title="1.大小写绕过"></a>1.大小写绕过</h4><p>这个绕过方式的出现是因为网站仅仅只过滤了<script>标签，而没有考虑标签中的大小写并不影响浏览器的解释所致。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">例如:</span><br><span class="line">&lt;sCript&gt;alert();&lt;/sCript&gt;</span><br></pre></td></tr></table></figure>

<h4 id="2-闭合符绕过"><a href="#2-闭合符绕过" class="headerlink" title="2.闭合符绕过"></a>2.闭合符绕过</h4><p>手动闭合两个双引号</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&quot;;&lt;script&gt;alert();&lt;/script&gt;;</span><br><span class="line">用&quot;;闭合两个双引号</span><br></pre></td></tr></table></figure>

<p>如果js代码被镶在网页的js代码中，可以用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;&lt;/script&gt;&lt;script&gt;alert();&lt;/script&gt;;</span><br></pre></td></tr></table></figure>

<h4 id="3-利用过滤后返回的语句再次构造攻击语句绕过"><a href="#3-利用过滤后返回的语句再次构造攻击语句绕过" class="headerlink" title="3.利用过滤后返回的语句再次构造攻击语句绕过"></a>3.利用过滤后返回的语句再次构造攻击语句绕过</h4><p>例如：过滤“<script>”中的尖括号过滤</p>
<p>则可以构造下列语句</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;sCri&lt;script&gt;pt&gt;alert(&quot;hey!&quot;)&lt;/scRi&lt;/script&gt;pt&gt;</span><br></pre></td></tr></table></figure>

<h4 id="4-并不是只有中可以插入代码"><a href="#4-并不是只有中可以插入代码" class="headerlink" title="4.并不是只有中可以插入代码"></a>4.并不是只有<script>中可以插入代码</h4><p>如果<script>被完全过滤，则可以考虑到的是，并不是只有<script>标签可以插入代码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.1.102/xss/example4.php?name=&lt;img</span><br><span class="line">src=&#x27;w.123&#x27; onerror=&#x27;alert(&quot;hey!&quot;)&#x27;&gt;</span><br></pre></td></tr></table></figure>

<p>当指定的图片地址不存在，就会存在onerror中的语句</p>
<h4 id="5-编码脚本绕过关键字过滤"><a href="#5-编码脚本绕过关键字过滤" class="headerlink" title="5.编码脚本绕过关键字过滤"></a>5.编码脚本绕过关键字过滤</h4><p>有的时候，服务器往往会对代码中的关键字（如alert）进行过滤，这个时候我们可以尝试将关键字进行编码后再插入，不过直接显示编码是不能被浏览器执行的，我们可以用另一个语句eval（）来实现。**eval()**会将编码过的语句解码后再执行。</p>
<h3 id="6-反射型xss"><a href="#6-反射型xss" class="headerlink" title="6.反射型xss"></a>6.反射型xss</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">表现在我们把我们的恶意脚本通过url的方式传递给了服务器，而服务器则只是不加处理的把脚本“反射”回访问者的浏览器而使访问者的浏览器执行相应的脚本。</span><br></pre></td></tr></table></figure>

<p>要想触发xss漏洞，需要访问特定链接才能实现</p>
<p>可能发生的功能点：搜索</p>
<h3 id="7-存储型xss"><a href="#7-存储型xss" class="headerlink" title="7.存储型xss"></a>7.存储型xss</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">存储型xss：储存到数据库中，然后当我们再次访问相同页面时，将恶意脚本从数据库中取出并返回给浏览器执行。这就意味着只要访问了这个页面的访客，都有可能会执行这段恶意脚本，因此储存型XSS的危害会更大。</span><br></pre></td></tr></table></figure>

<p>存储型xss往往会发生在和数据库交互的地方</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">因为存储型xss可能会获取管理员cookie，所以存储型xss会比反射型xss漏洞危害更大</span><br></pre></td></tr></table></figure>

</script></p></div></div></main><div id="pagination-wrapper"><a id="page-next" href="/2021/06/13/url%E8%B7%B3%E8%BD%AC%E6%BC%8F%E6%B4%9E/">url跳转漏洞 <i class="fa fa-chevron-right"></i></a></div><footer id="page-footer"><div id="footer-wrapper"><div id="blog-meta">&copy;2017-2021 By keikei | Theme - <a id='theme-name' target="_blank" rel="noopener" href="https://github.com/huan555/lemon-lime"> Lemon-Lime</a> | Power By <a id='theme-powered-by' href=http://hexo.io> Hexo</a></div><div id="viewed-record"><script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-eye" aria-hidden="true"></i> <span id="busuanzi_value_page_pv"></span></span></div><div id="copyright-wrapper"><i class="fa fa-cc" aria-hidden="true"></i><div id="copyright">Except where otherwise noted, content on this blog is licensed under <a rel="license" href=http://creativecommons.org/licenses/by-nc-sa/4.0/>CC BY-NC-SA 4.0</a>.</div></div><div id="contact-me"><div id="rss"><a href="/atom.xml" type="application/atom+xml" rel="alternate" target="_blank"><i class="fa fa-rss" aria-hidden="true"></i></a></div><span id="github"><a target="_blank" rel="noopener" href="https://github.com/yourUserName"><i class="fa fa-github" aria-hidden="true"></i></a></span></div></div></footer><script src="/compass/js/blog.js"></script></div></body>